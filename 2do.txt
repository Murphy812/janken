итак, что я хочу, что я хочу:

ОБЯЗАТЕЛЬНО

+ реализовать бой. для этого надо:
  + форму отправки знака
  + обработку знака:
     - ищем в battles незаконченный бой с этим противником, где ты уке. Если его нет, то открываем бой:
       + проверка, что в battles не больше 2 записей, где ты уке - иначе отлуп "такой-то не принимает вызов"
       + определяем max(+1) ид боя. определяем количество хитов противников (сумму их очков достижений)

       + фиксация для обоих противников количества ударов, которые они могут пропустить
         + делим большее на меньшее. дробную часть с такой же вероятностью переводим в +1.
           то есть для 3 и 8, уке выдержит всегда 1, а наге или 2 (в 33% процентах случаев), или 3 (66%)
           так, меньше наркомании. Просто округляем от 0.5
         + вставка записи про бой с таким количеством допустимых ударов для каждого
     + генерация знака противника
     + вставка записи про соударение
     + расчет и запись результата
        + кто пропустил удар - тому снимаем хиты. Вывести информацию, сколько он еще может пропустить
        - если кто-то кончился - закрываем бой и пишем победителем того, у кого остались хиты
       "Я покачнулся, но сумею выдержать еще X ударов/Пропустите еще Z ударов - и я одержу победу"/"Благодарю за поединок"
     - фиксация и отправка результата раунда/боя
+ все now() пофиксить так, чтобы вместо даты была дата-время. возможно, просто надо все колонки date поменять на datetime? реально
+ сделать нашу картинку на оперативном экране поменьше
+ скрыть "поменять пароль"

+ сделать страничку просмотра аватара "почитать о нем"
  - имя
  - соцроль
  - текущая сила (и вообще список его плюшек)
  - количество побед
  - по-хорошему надо бы его просто показывать справа от нашей картинки
  так, нахер. просто когда бьем кого-то - показываем его описание.

+ ставить текущего противника в комбобоксе по умолчанию
- сделать ссылкой все имена
+ переделать верстку - в бою же хочется продолжать бой, это же бой. А приходится листать

AJAX edition
- нарисовать новый интерфейс:
 - "я":
    - свои статы (очки, победы)
    - статус (меняется шутами)
    - сообщения с пейджингом (по клику открывается диалог с этим аватаром - можно писать). Для сообщений шутов - возможность лайка
    - список своих вещей/очков достижений с пейджингом (по клику подробное описание + возможность передать)
 - календарь событий когда-где-что (уроков, тренировок выбранного клуба, встреч дзянкэн, фестиваль)
 - "взаимодействия": выбор аватара для него (слайдом), для текущего выводятся:
    - статы
    - список вещей, 
    - история общего взаимодействия с ним (слова, подарки, знаки-победы) с пейджингом и возможностью фильтрации по типу
 - суперсила:
     - создание Королями ставок на изменения статов в системе у указанного аватара
     - создание Интеллектуалами предметов и отправка на рецензию
     - гуглинг Интеллектуалами про выбранного персонажа - какой-то тест по урокам? судоку? арифметика?
     - установка Троллями статуса другому ученику
     - отправка Троллями широковещательного сообщения
     - ввод Воронами кодов (получение инфы? получение очков?) найденных везде


БЛИНКОМ edition (git checkout -b blyamken)

+ убрать ограничение на бои
- вернуть ограничение на бои - сделать его индивидуальным для персонажей

+ добавить в аватары поле с подробным описанием
+ выводить в описании аватара подробное описание
+ выводить в описании аватара список его вещей

+ на странице логина сделать логин комбобоксом и писать явно про неправильный пароль

+ заставить ид1 всегда кидать огонь
- создать тактики в базе. хранимые процедуры?


+ у троллей сделать отправку сообщения всем
+ показывать в Новостях спец.сообщения от троллей всем
- сделать пейджинг для сообщений

- создать мастерскую формочку для создания предметов (несколько существительных комбинируются) и раздачи их другим
  (или сделать мастерскую формочку одобрения созданных интеллектуалами предметов)

+ дарить вещь за победу (создавать и тут же дарить) - если округленный корень от количества побед превышает текущее количество вещей-2
  и писать про это надо тоже. Но вообще переживем. в жизни надо зарабатывать.
  блинчик

- да, создавать и дарить. "мама/Рама/дама/лама/..." "мыла/пила/выла/сбыла" "море/горе/в норе/на горе"


  или? насоздавать свитков x/N - про клип (сакральное знание про очки), про игру


+ создать аккаунты: 
   орг - Короли - в описании "эффективный менеджер" 14 блинчиков, всегда огонь)
   волонтер - Интеллектуалы - в описании "святой человек", в вещах 1 молоток. Тактика - рандом

   МГ "Ведьмака" - Короли - в описании даты-ссылка, в вещах "постмодернизм" и "ксенофобия"
   МГ "Фоллаута" - Короли - в описании даты-ссылка, в вещах "привода" и "рок"
   МГ "Сакуры" - Короли - в описании даты-ссылка, в вещах "моно-но аварэ" и "первая весна"
   
  давать логиниться только в последние три (пароль прямо в названии аккаунта).

  заблокировать возможность отправки вещей - то есть список вещей выводить, но отдавать их нельзя - только получать
  подробный просмотр не нужен - просто "свиток: совы не то. я - то, что надо" и другие


     Информ-центр - Тролли - в описании "читает все интернеты, пишет в половину из них", в вещах "чай", "потеряшки"
     vk.com/larp_spb - Тролли - в описании "берет интервью у духовно богатых и раздает всем остальным", в вещах "это не микрофон!", "журналистский взгляд"
     @gde_srach - Тролли - в описании "в рабочий полдень", в вещах "анонимность" и "православие"
  хочется, чтобы активные пользователи могли писать из-под троллей, но подтверждали доступ активностью
  для этого нужна возможность разлогинивания с сервера указанного пользователя
   - надо менять для него соль в get_master_av. Тогда обладатели кук обламываются и перелогиниваются



ПОДЧИСТИТЬ

+ убрать возможность отправки себе
+ убрать вывод $_POST и $_GET (Array())

ФИЧИ

+ поменять str на "побед"
+ поменять название поля strength на "wins"
- сделать возможность просмотра подробного описания свитка (доп.поле?) - доп.форма
- сделать падежи для всех слов. И вообще неустанно работать над языком!
- с некоторой вероятностью снимать два хита противнику, если мы бьем своим знаком



- заставить функции отдавать json - json_encode

- сделать табличку флагов (тегов) и связей тегов с аватарами
- сделать флаг интеллектуала и доступные по нему функции - создание предметов на рецензию (ввести название и "создать")
- сделать флаг шутов и доступные по нему функции - смена статусов другим юзерам (выбрать игрока, ввести статус и "установить")
- сделать флаг королей и функции для него - установка ставок на результаты каких-то боев
- сделать флаг белых ворон и для него - ввод номера чужого бейджа иногда что-то дает


-+ навернуть сверху какой-то красивенький html-фреймворк (html-kickstarter, например)


Думаю о том, чтобы применить в gui какой-то ajax - чтобы:
 а) не перегружать страницу целиком, а только запрошенные данные
 б) в фоновом режиме считывать обновления
обычный вариант - это клиент периодически спрашивает у сервера, есть ли чё. Нам интересны относительно даты, указываемой в запросе, есть ли:
 - новые сообщения (изменения статусов шутами расходится всем как сообщения)
 - новые подарки
